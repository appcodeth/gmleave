angular.module("bw.paging",[]).directive("paging",function(){var r=/\{page\}/g;return{restrict:"EA",link:function(t,e,a){t.$watchCollection("[page,pageSize,total,disabled]",function(){!function(t,e){(!t.pageSize||t.pageSize<=0)&&(t.pageSize=1);var a,s,l=Math.ceil(t.total/t.pageSize);(function(t,e){t.List=[],t.Hide=!1,t.page=parseInt(t.page)||1,t.total=parseInt(t.total)||0,t.adjacent=parseInt(t.adjacent)||2,t.pgHref=t.pgHref||"",t.dots=t.dots||"...",t.ulClass=t.ulClass||"pagination",t.activeClass=t.activeClass||"active",t.disabledClass=t.disabledClass||"disabled",t.textFirst=t.textFirst||"<<",t.textLast=t.textLast||">>",t.textNext=t.textNext||">",t.textPrev=t.textPrev||"<",t.textFirstClass=t.textFirstClass||"",t.textLastClass=t.textLastClass||"",t.textNextClass=t.textNextClass||"",t.textPrevClass=t.textPrevClass||"",t.textTitlePage=t.textTitlePage||"Page {page}",t.textTitleFirst=t.textTitleFirst||"First Page",t.textTitleLast=t.textTitleLast||"Last Page",t.textTitleNext=t.textTitleNext||"Next Page",t.textTitlePrev=t.textTitlePrev||"Previous Page",t.hideIfEmpty=i(t,e.hideIfEmpty),t.showPrevNext=i(t,e.showPrevNext),t.showFirstLast=i(t,e.showFirstLast),t.scrollTop=i(t,e.scrollTop),t.isDisabled=i(t,e.disabled)})(t,e),function(t,e){t.page>e&&(t.page=e),t.page<=0&&(t.page=1),t.adjacent<=0&&(t.adjacent=2),e<=1&&(t.Hide=t.hideIfEmpty)}(t,l),e=2*t.adjacent+2,n(t,l,"prev"),l<=2+e?p(a=1,l,t):t.page-t.adjacent<=2?(p(a=1,s=1+e,t),o(l,t,s)):t.page<l-(t.adjacent+2)?(a=t.page-t.adjacent,s=t.page+t.adjacent,x(t,a),p(a,s,t),o(l,t,s)):(x(t,a=(s=l)-e),p(a,s,t)),n(t,l,"next")}(t,a)})},template:function(t,e){return'<ul data-ng-hide="Hide" data-ng-class="ulClass"> <li title="{{Item.title}}" class="page-item" data-ng-class="Item.liClass" data-ng-repeat="Item in List"> <a '+(e.pgHref?'data-ng-href="{{Item.pgHref}}" ':"href ")+'class="page-link" data-ng-class="Item.aClass" data-ng-click="Item.action()" data-ng-bind="Item.value"></a> </li></ul>'},scope:{page:"=",pageSize:"=",total:"=",disabled:"@",dots:"@",ulClass:"@",activeClass:"@",disabledClass:"@",adjacent:"@",pagingAction:"&",pgHref:"@",textFirst:"@",textLast:"@",textNext:"@",textPrev:"@",textFirstClass:"@",textLastClass:"@",textNextClass:"@",textPrevClass:"@",textTitlePage:"@",textTitleFirst:"@",textTitleLast:"@",textTitleNext:"@",textTitlePrev:"@"}};function i(t,e){return!!angular.isDefined(e)&&!!t.$parent.$eval(e)}function g(t,e){t.page!=e&&(t.isDisabled||(t.page=e,t.pagingAction({page:t.page,pageSize:t.pageSize,total:t.total}),t.scrollTop&&scrollTo(0,0)))}function n(a,t,e){var s,l,i,n;!a.showPrevNext&&!a.showFirstLast||t<1||("prev"===e?(n=a.page-1<=0,l=a.page-1<=0?1:a.page-1,a.showFirstLast&&(i={value:a.textFirst,title:a.textTitleFirst,aClass:a.textFirstClass,page:1}),a.showPrevNext&&(s={value:a.textPrev,title:a.textTitlePrev,aClass:a.textPrevClass,page:l})):(n=a.page+1>t,l=a.page+1>=t?t:a.page+1,a.showPrevNext&&(i={value:a.textNext,title:a.textTitleNext,aClass:a.textNextClass,page:l}),a.showFirstLast&&(s={value:a.textLast,title:a.textTitleLast,aClass:a.textLastClass,page:t})),t=function(t,e){return{title:t.title,aClass:t.aClass,value:t.aClass?"":t.value,liClass:e?a.disabledClass:"",pgHref:e?"":a.pgHref.replace(r,t.page),action:function(){e||g(a,t.page)}}},a.isDisabled&&(n=!0),i&&(i=t(i,n),a.List.push(i)),s&&(n=t(s,n),a.List.push(n)))}function p(t,e,a){for(var s=0,s=t;s<=e;s++){var l=a.pgHref.replace(r,s),i=a.page==s?a.activeClass:"";a.isDisabled&&(l="",i=a.disabledClass),a.List.push({value:s,title:a.textTitlePage.replace(r,s),liClass:i,pgHref:l,action:function(){g(a,this.value)}})}}function s(t){t.List.push({value:t.dots,liClass:t.disabledClass})}function x(t,e){p(1,2,t),3!=e&&s(t)}function o(t,e,a){a!=t-2&&s(e),p(t-1,t,e)}});
